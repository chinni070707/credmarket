# Production Deployment Checklist

## âœ… Environment Variables (Render Dashboard)

### Required
- [ ] `DEBUG=False` (lowercase!)
- [ ] `SECRET_KEY` (auto-generated by Render)
- [ ] `DATABASE_URL` (auto-populated from database)
- [ ] `ALLOWED_HOSTS=credmarket.onrender.com`
- [ ] `SITE_URL=https://credmarket.onrender.com`
- [ ] `CSRF_TRUSTED_ORIGINS=https://credmarket.onrender.com`

### Email (Resend)
- [ ] `EMAIL_HOST=smtp.resend.com`
- [ ] `EMAIL_PORT=587`
- [ ] `EMAIL_HOST_USER=resend`
- [ ] `EMAIL_HOST_PASSWORD=<your-resend-api-key>`
- [ ] `DEFAULT_FROM_EMAIL=onboarding@resend.dev`
- [ ] `EMAIL_USE_TLS=True`

### Admin Setup
- [ ] `ADMIN_PASSWORD=<secure-password>` (for setup_production command)

### Optional
- [ ] `CLOUDINARY_URL=<cloudinary-url>` (for image uploads)

## âœ… Security Checklist

- [x] SSL/HTTPS enabled (Render provides this)
- [x] HSTS headers configured
- [x] CSRF protection enabled
- [x] Secure cookies enabled
- [x] XSS protection enabled
- [x] Content type sniffing protection
- [x] Clickjacking protection
- [ ] Review ALLOWED_HOSTS
- [ ] Review CSRF_TRUSTED_ORIGINS

## âœ… Database

- [x] PostgreSQL database created
- [x] Connection pooling enabled (conn_max_age=600)
- [x] Health checks enabled
- [ ] Database migrations run successfully
- [ ] Initial data loaded (companies, categories)

## âœ… Static Files

- [x] WhiteNoise configured
- [x] collectstatic runs in build script
- [ ] Static files accessible in production

## âœ… Error Handling & Monitoring

- [x] Logging configured
- [x] Gunicorn debug logging enabled
- [ ] Monitor Render logs for errors
- [ ] Test error pages (404, 500)

## âœ… Application Health

- [ ] Homepage loads without errors
- [ ] Admin panel accessible (/admin/)
- [ ] User registration works
- [ ] Login/logout works
- [ ] Listing creation works
- [ ] Email sending works (test with password reset)
- [ ] Static files load correctly
- [ ] Images upload correctly

## âœ… Performance

- [x] Database connection pooling enabled
- [x] Static files served via WhiteNoise
- [ ] Consider CDN for user-uploaded images
- [ ] Monitor response times

## ðŸ”§ Common Issues & Solutions

### 500 Error
1. Check `DEBUG=False` (lowercase)
2. Verify `ALLOWED_HOSTS` includes your domain
3. Check Render logs for actual error
4. Verify all required environment variables are set

### Static Files Not Loading
1. Ensure `collectstatic` runs in build.sh
2. Check WhiteNoise is in MIDDLEWARE
3. Verify STATIC_ROOT and STATIC_URL settings

### Database Connection Error
1. Verify DATABASE_URL is set correctly
2. Check PostgreSQL database is running
3. Verify migrations have run

### Email Not Sending
1. Verify Resend API key is correct
2. Check EMAIL_HOST_PASSWORD is set
3. Test with a simple email (password reset)
4. Check Resend dashboard for delivery status

## ðŸ“Š Post-Deployment Tasks

1. **Create Superuser**
   - Automatic via `setup_production` command
   - Default username: `admin`
   - Password from `ADMIN_PASSWORD` env var

2. **Load Initial Data**
   - 106 companies loaded automatically
   - Add categories manually or via fixture

3. **Test Email**
   - Try password reset to test email delivery
   - Verify sender domain in Resend

4. **Monitor Logs**
   - Watch Render logs for first 24 hours
   - Look for unusual errors or patterns

5. **Custom Domain (Optional)**
   - Add custom domain in Render
   - Update DNS records
   - Update ALLOWED_HOSTS and CSRF_TRUSTED_ORIGINS

## ðŸš€ Next Steps

- [ ] Add monitoring (e.g., Sentry for error tracking)
- [ ] Set up backup strategy for database
- [ ] Configure CDN for static/media files
- [ ] Add rate limiting for API endpoints
- [ ] Set up CI/CD pipeline
- [ ] Add automated tests
- [ ] Configure custom domain
- [ ] Add SSL certificate for custom domain
